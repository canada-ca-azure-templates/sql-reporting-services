{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "sqlSettings": {
            "value": {
                "dbSAUsername": "shared\\azureadmin",
                "dbSAUserPasswordKey": "adDefaultPassword",
                "sqlLB": "PwS3CRMSQL1-L"
            }
        },
        "vmBaseUrl": {
            "value": "https://azpwsdeployment.blob.core.windows.net/library-dev/arm/servers/20190409.2/servers.json"
        },
        "vmObject": {
            "value": {
                "comment": "This is for the sql server reporting services",
                "resourceGroup": "PwS3-GCPS-CRM-DG1-RG",
                "vmKeyVault": {
                    "keyVaultResourceGroupName": "PwS3-GCPS-CRM-KeyVault-RG",
                    "keyVaultName": "PwS3-CRM-Keyvault",
                    "vaultCertificates": [
                        {
                            "certificateUrl": "https://pws3-crm-keyvault.vault.azure.net/secrets/pws3gccas/1f2f47d0c96f41db80fe6900f44e9a9d",
                            "certificateStore": "My"
                        }
                    ]
                },
                "domainObject": {
                    "domainToJoin": "shared.pws3.pspc-spac.ca",
                    "domainUsername": "azureadmin",
                    "domainUserSecretName": "adDefaultPassword",
                    "domainJoinOptions": 3,
                    "ouPath":"OU=Servers,OU=DG1,OU=GCCASE,OU=GCPS,OU=Applications,OU=PSPC,DC=shared,DC=pws3,DC=pspc-spac,DC=ca"
                },
                "numberOfVMInstances": 1,
                "deploymentSuffix": "PwS3CRMRS1",
                "vm": {
                    "winRmCertUrl": "https://pws3-crm-keyvault.vault.azure.net/secrets/pws3gccas/1f2f47d0c96f41db80fe6900f44e9a9d",
                    "encryptDisks":         {
                        "keyVaultResourceGroup": "PwS3-GCPS-CRM-Keyvault-RG",
                        "keyVaultName": "PwS3-CRM-Keyvault"
                    },

                    "computerName": "PwS3CRMRS1-",
                    "adminUsername": "azureadmin",
                    "adminPassword": "server2016DefaultPassword",
                    "licenseType": "Windows_Server",
                    "shutdownConfig": {
                        "autoShutdownStatus": "Enabled",
                        "autoShutdownTime": "19:00",
                        "autoShutdownTimeZone": "Eastern Standard Time",
                        "autoShutdownNotificationStatus": "Disabled"
                    },
                    "vmSize": "Standard_DS3_v2",
                    "antimalwareInfo": {
                        "exclusionPaths": "C:\\Program Files\\Microsoft SQL Server;c:\\WindowsAzure",
                        "exclusionExtensions": ".mdf;.ldf;.ndf;.bak;.trn;.trc;.sqlaudit;.sql",
                        "exclusionProcesses": "w3wp.exe;explorer.exe;sqlservr.exe;reportingservicesservice.exe;msmdsrv.exe;WaAppAgent.exe;WindowsAzureTelemetryService.exe;WindowsAzureGuestAgent.exe",
                        "realtimeProtectionEnabled": "true",
                        "scheduledScanSettingsEnabled": "false",
                        "scheduledScanSettingsType": "Full",
                        "scheduledScanSettingsDay": "1",
                        "scheduledScanSettingsTime": "120"
                    },
                    "bootDiagnostic": true,
                    "backupConfig": {
                        "existingBackupVaultRG": "PwS3-GCPS-CRM-Backup-RG",
                        "existingBackupVaultName": "PwS3-GCPS-CRM-Backup-Vault",
                        "existingBackupPolicy": "DailyBackupPolicy"
                    },
                    "storageProfile": {
                        "osDisk": {
                            "createOption": "fromImage",
                            "caching": "ReadWrite",
                            "managedDisk": {
                                "storageAccountType": "StandardSSD_LRS"
                            }
                        },
                        "dataDisks": [                         
                        ],
                        "imageReference": {
                            "publisher": "MicrosoftSQLServer",
                            "offer": "SQL2016SP2-WS2016",
                            "sku": "Enterprise",
                            "version": "latest"
                        }
                    },
                    "availabilitySetName": "PwS3CRMRS1-as"
                },
                "networkSecurityGroups": {
                    "name": "NSG",
                    "properties": {
                        "securityRules": []
                    }
                },
                "networkInterfaces": {
                    "name": "NIC",
                    "acceleratedNetworking": true,
                    "vnetResourceGroupName": "PwS3-Infra-NetShared-RG",
                    "vnetName": "PwS3-Infra-NetShared-VNET",
                    "subnetName": "pws3-shared-app-crm"
                },
                "tagValues": {
                    "Owner": "john.nephin@tpsgc-pwgsc.gc.ca",
                    "CostCenter": "PSPC-EA",
                    "Enviroment": "Sandbox",
                    "Classification": "Unclassified",
                    "Organizations": "PSPC-CCC-E&O",
                    "DeploymentVersion": "2019-01-24",
                    "Workload": "Report Server"
                }
            }
        }
    }
}